<!DOCTYPE html>
<html>
  <head>
    <title>Twittler</title>
    <link href="main.css" type="text/css" rel="stylesheet" />
    <link href='https://fonts.googleapis.com/css?family=Lato|Merriweather' rel='stylesheet' type='text/css'>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <div class="wrapper" id="top">
      <header>
        <h1>Twittler</h1>
      </header>
      <div class="main">
        <aside>
          Current View:<br />
          <span class="user_selected">All Users</span>
        </aside>
        <div class="button-wrapper">
          <button class="button">SHOW NEW TWEETS</button>
        </div>
        <section class="content">
        </section>
      </div><!-- .main -->
      <a href="#top" id="top_link">Top</a>
      <footer>
      Robert Boggs for Hack Reactor | Twitter Clone with jQuery
      </footer>
    </div><!-- .wrapper -->
    <script>

      var username = "All Users";
      function showTweets(user) {
          var $content = $('.content');
          $content.html('');
          if (user === undefined) {
            var stream = streams.home;
            username = "All Users";
            $('.user_selected').text(username);
          } else {
            $('.user_selected').text(user);
            var user = user.slice(1);
            var stream = streams.users[user];
          }
          var index = 0;
          while(index < stream.length) {
            var tweet = stream[index];
            var $tweet =  $('<article><span class="user">' +'@' + tweet.user
              + '</span><span class="time">' + tweet.created_at
              + '</span><br /><span class="message">' + tweet.message
              + '</span></article>');
            $tweet.prependTo($content);
            index++;
          }
          var height = $('.content').height() - 20;
          $('aside').height(height);
        }

      $(window).load(function(){

        showTweets();

        $(document).on('click', '.user', function() {
          username = $(this).text();
          showTweets(username);
        });

        $('header').on('click','h1', function() {
          showTweets();
        });

        $('.button').on('click', function() {
          if (username[0] !== "@") {
            showTweets();
          } else {
            showTweets(username);
          }
        });

      });

    </script>
  </body>
</html>
